<h1>–°–ø–∏—Å–æ–∫ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤</h1>

<table border="1" cellpadding="5">
    <thead>
        <tr>
            <th>ID</th>
            <th>–Ü–º‚Äô—è</th>
            <th>–í—ñ–∫</th>
            <th>–î—ñ—ó</th>
        </tr>
    </thead>
    <tbody id="table"></tbody>
</table>

<script>
// --- –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —Å–ø–∏—Å–∫—É ---
async function loadUsers() {
    const res = await fetch("/api/users");
    const users = await res.json();

    const tbody = document.getElementById("table");
    tbody.innerHTML = "";

    users.forEach(u => {
        tbody.innerHTML += `
            <tr>
                <td>${u.id}</td>
                <td><input value="${u.name}" id="name-${u.id}"></td>
                <td><input value="${u.age}" id="age-${u.id}" type="number"></td>
                <td>
                    <button onclick="updateUser(${u.id})">üíæ –ó–±–µ—Ä–µ–≥—Ç–∏</button>
                    <button onclick="deleteUser(${u.id})">‚ùå –í–∏–¥–∞–ª–∏—Ç–∏</button>
                </td>
            </tr>
        `;
    });
}

// --- –û–Ω–æ–≤–ª–µ–Ω–Ω—è ---
async function updateUser(id) {
    const name = document.getElementById(`name-${id}`).value;
    const age = document.getElementById(`age-${id}`).value;

    await fetch(`/api/users/${id}`, {
        method: "PUT",
        headers: {"Content-Type": "application/json"},
        body: JSON.stringify({name, age})
    });

    loadUsers();
}

// --- –í–∏–¥–∞–ª–µ–Ω–Ω—è ---
async function deleteUser(id) {
    await fetch(`/api/users/${id}`, {
        method: "DELETE"
    });

    loadUsers();
}

loadUsers();
</script>

<a href="/">–î–æ–¥–∞—Ç–∏ –Ω–æ–≤–æ–≥–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞</a>
